{
  "kind": "collectionType",
  "collectionName": "credit_notes",
  "info": {
    "singularName": "credit-note",
    "pluralName": "credit-notes",
    "displayName": "Credit Note",
    "description": "Notas Crédito electrónicas"
  },
  "options": {
    "draftAndPublish": false
  },
  "pluginOptions": {},
  "attributes": {
    "numero_nota": {
      "type": "string",
      "maxLength": 50
    },
    "prefijo": {
      "type": "string",
      "maxLength": 10
    },
    "consecutivo": {
      "type": "integer"
    },
    "fecha_emision": {
      "type": "datetime",
      "required": true
    },
    "motivo_correccion": {
      "type": "string",
      "required": true
    },
    "concepto_correccion_id": {
      "type": "integer",
      "required": true,
      "default": 5
    },
    "descripcion_correccion": {
      "type": "text"
    },
    "subtotal": {
      "type": "decimal",
      "required": true
    },
    "total_iva": {
      "type": "decimal"
    },
    "total_ico": {
      "type": "decimal"
    },
    "total_descuentos": {
      "type": "decimal",
      "default": 0
    },
    "total": {
      "type": "decimal",
      "required": true
    },
    "observaciones": {
      "type": "text"
    },
    "estado_local": {
      "type": "enumeration",
      "default": "Borrador",
      "enum": [
        "Borrador",
        "Enviada",
        "Aceptada",
        "Rechazada",
        "Anulada",
        "Error"
      ]
    },
    "estado_dian": {
      "type": "string",
      "maxLength": 100
    },
    "factus_id": {
      "type": "string"
    },
    "factus_bill_id": {
      "type": "integer"
    },
    "public_url": {
      "type": "string"
    },
    "cude": {
      "type": "string"
    },
    "qr_code": {
      "type": "text"
    },
    "url_pdf": {
      "type": "string"
    },
    "url_xml": {
      "type": "string"
    },
    "respuesta_factus": {
      "type": "json"
    },
    "errores_validacion": {
      "type": "json"
    },
    "fecha_envio_dian": {
      "type": "datetime"
    },
    "fecha_validacion_dian": {
      "type": "datetime"
    },
    "intentos_envio": {
      "type": "integer",
      "default": 0
    },
    "enviar_email": {
      "type": "boolean",
      "default": false
    },
    "client": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::client.client"
    },
    "invoice": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::invoice.invoice"
    },
    "credit_note_items": {
      "type": "relation",
      "relation": "oneToMany",
      "target": "api::credit-note-item.credit-note-item",
      "mappedBy": "credit_note"
    },
    "numering_range": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::numering-range.numering-range"
    }
  }
}
